<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->
<head>
	<title>Blog Full Width Item 1 | Unify - Responsive Website Template</title>

	<!-- Meta -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author" content="">

	<!-- Favicon -->
	<link rel="shortcut icon" href="favicon.ico">

	<!-- Web Fonts -->
	<link rel='stylesheet' type='text/css' href='//fonts.googleapis.com/css?family=Open+Sans:400,300,600&amp;subset=cyrillic,latin'>

	<!-- CSS Global Compulsory -->
	<link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/css/style.css">

	<!-- CSS Header and Footer -->
	<link rel="stylesheet" href="assets/css/headers/header-v6.css">
	<link rel="stylesheet" href="assets/css/footers/footer-v1.css">

	<!-- CSS Implementing Plugins -->
	<link rel="stylesheet" href="assets/plugins/animate.css">
	<link rel="stylesheet" href="assets/plugins/line-icons/line-icons.css">
	<link rel="stylesheet" href="assets/plugins/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="assets/plugins/sky-forms-pro/skyforms/css/sky-forms.css">
	<link rel="stylesheet" href="assets/plugins/sky-forms-pro/skyforms/custom/custom-sky-forms.css">

	<!-- CSS Theme -->
	<link rel="stylesheet" href="assets/css/theme-colors/default.css" id="style_color">
	<link rel="stylesheet" href="assets/css/theme-skins/dark.css">

	<!-- CSS Customization -->
	<link rel="stylesheet" href="assets/css/custom.css">
	
	<!-- Angular JS -->
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
	<script type="text/javascript">
	
	var mid='592a7af2f8bc6d93b34216ef';
	var module=angular.module('timelineEditApp', []);
	var project_id;
	var post_id = document.location.href.split("?");
	post_id = post_id[1].split("&");
	//alert(post_id);
	project_id = post_id[1];
	post_id = post_id[0];
	post_id = post_id.split("=");
	post_id = post_id[1];
	project_id = project_id.split("=");
	project_id = project_id[1];
	
	//alert(post_id);
	//alert(project_id);
	
	//alert(0);
	
	module.controller('TimelineEditDisplayController', function($scope,$http) {
		//alert(1);
		// Bring the members into scope variable members
		$http.get('http://'+document.location.host+'/post/'+post_id).then(function(res) {
			$scope.post = res.data.result;
			$scope.mid = mid;
			$scope.id = project_id;
			// Bring the timeline into scope variable posts
		});
	});
	module.directive('ngElementReady', ['$timeout', function($timeout) {
		//alert(2);
        return {
            restrict: "A", // attribute only
            link: function($scope, $element, $attributes) {
                angular.getTestability($element).whenStable(ready);
            }
        };
    }]);
	
	</script>
</head>

<body class="header-fixed">
	<div class="wrapper" ng-app="timelineEditApp" ng-element-ready ng-controller="TimelineEditDisplayController">
		<!--=== Header v6 ===-->
		<div class="header-v6 header-classic-white">
			<!-- Navbar -->
			<div class="navbar" role="navigation">
				<div class="container">
					<!-- Brand and toggle get grouped for better mobile display -->
					<div class="menu-container">
						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>

						<!-- Navbar Brand -->
						<div class="navbar-brand">
							<a href="index.html">
								<img class="shrink-logo" src="assets/img/icons/logo-2_s.png" alt="Logo">
							</a>
						</div>
						<!-- ENd Navbar Brand -->


					</div>

					<!-- Collect the nav links, forms, and other content for toggling -->
					<div class="collapse navbar-collapse navbar-responsive-collapse">
						<div class="menu-container">
							<ul class="nav navbar-nav">
								<!-- Home -->
								<li class="active">
									<a href="index.html">
										Home
									</a>
								</li>
								<!-- End Home -->
								
								<!-- Discover -->
								<li>
									<a href="search_projects.html">
										Discover Projects
									</a>
								</li>
								<!-- End Discover -->
								
								<!-- My Menu -->
								<li class="dropdown">
									<a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown">
										My Menu
									</a>
									<ul class="dropdown-menu pull-right">
										<li>
											<a href="my_page.html?id={{mid}}">My Page</a>
										</li>
										<li class="dropdown-submenu">
											<a href="javascript:void(0);">My Projects</a>
											<ul class="dropdown-menu submenu-left">
												<li><a href="project_details.html?id={{id}}">CapstoneExpo</a></li>
											</ul>
										</li>
										<li><a href="blog_timeline.html">Sign out</a></li>
									</ul>
								</li>
								<!-- End My Menu -->

							</ul>
						</div>
					</div><!--/navbar-collapse-->
				</div>
			</div>
			<!-- End Navbar -->
		</div>
		<!--=== End Header v6 ===-->


		<!--=== Breadcrumbs ===-->
		<div class="breadcrumbs breadcrumbs-light">
			<div class="container">
				<h1 class="pull-left">Timeline Edit</h1>
				<ul class="pull-right breadcrumb">
					<li><a href="index.html">Home</a></li>
					<li><a href="">Features</a></li>
					<li class="active">Timeline Edit</li>
				</ul>
			</div>
		</div><!--/breadcrumbs-->
		<!--=== End Breadcrumbs ===-->

		<!--=== Blog Posts ===-->
		<div class="bg-color-light" >
			<div class="container content-sm">
				<!-- News v3 -->
				<div name="{{post._id}}" class="news-v3 bg-color-white margin-bottom-30 have_name">
					<div id='image' style="height:500px" class="overflow-hidden">
						<img class="img-responsive full-width" style="position:relative; top:-50%" class="img-responsive full-width" src="/image/download/{{post.image}}" alt="">
					</div>
					<div class="news-v3-in">
					<div class="margin-bottom-30"></div>
						
						
					<form action="assets/php/demo-order.php" method="post" enctype="multipart/form-data" id="sky-form1" class="sky-form">
						<fieldset>
							<div class="row">
								<section class="col col-6">
									<label class="input">
										<input type="text" id="subject" name="subject" value="{{post.title}}">
									</label>
								</section>
								<section class="col col-6">
									<label class="input">
										<i class="icon-append fa fa-user"></i>
										<input type="text" id="writer" name="name" value="{{post.writer}}">
									</label>
								</section>
							</div>
						</fieldset>

						<fieldset>
							<div class="row">
								<section class="col col-6">
									<label class="select">
										<select name="content">
											<option id="select"value="none" selected disabled></option>
											<option value="design">Design</option>
											<option value="IT">IT</option>
											<option value="biology">Biology</option>
											<option value="physics">Physics</option>
											<option value="chemistry">Chemistry</option>
										</select>
										<i></i>
									</label>
								</section>
							</div>

							<div class="row">
								<section class="col col-6">
									<label class="input">
										<i id='calender' class="icon-append fa fa-calendar"></i>
										<input type="text" name="start" id="start" value="{{post.writeTime|date:'yyyy.MM.dd'}}">
									</label>
								</section>
							</div>

							<section>
								<label class="textarea">
									<textarea id="text" rows="20" style="text-align:left; color:black" name="comment" value="">{{post.contents}}</textarea>
								</label>
							</section>
						</fieldset>
						
						<footer>
							<button type="submit" class="btn-u">Edit</button>
							<div class="progress"></div>
						</footer>
						
						<div class="message">
							<i class="rounded-x fa fa-check"></i>
						</div>
					</form>
					</div>
				</div>
				<!-- End News v3 -->

				<hr>

				

				<hr>

			</div><!--/end container-->
		</div>
		<!--=== End Blog Posts ===-->

		<!--=== Footer v1 ===-->
		<div id="footer-v1" class="footer-v1">
			<div class="copyright">
				<div class="container">
					<div class="row">
						<div class="col-md-6">
							<p>
								2015 &copy; All Rights Reserved.
								<a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a>
							</p>
						</div>

						<!-- Social Links -->
						<div class="col-md-6">
							<ul class="footer-socials list-inline">
								<li>
									<a href="https://www.facebook.com/kaistkschool/?fref=ts" class="tooltips" data-toggle="tooltip" data-placement="top" title="" data-original-title="Facebook">
										<i class="fa fa-facebook"></i>
									</a>
								</li>
								<li>
									<a href="https://www.youtube.com/channel/UC2sJC5hisC5dkXk6zODUnfA" class="tooltips" data-toggle="tooltip" data-placement="top" title="" data-original-title="Youtube">
										<i class="fa fa-youtube"></i>
									</a>
								</li>
							</ul>
						</div>
						<!-- End Social Links -->
					</div>
				</div>
			</div><!--/copyright-->
		</div>
		<!--=== End Footer v1 ===-->
	</div><!--/wrapper-->

	<!-- JS Global Compulsory -->
	<script type="text/javascript" src="assets/plugins/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="assets/plugins/jquery/jquery-migrate.min.js"></script>
	<script type="text/javascript" src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>
	<!-- JS Implementing Plugins -->
	<script type="text/javascript" src="assets/plugins/back-to-top.js"></script>
	<script type="text/javascript" src="assets/plugins/smoothScroll.js"></script>
	<script src="assets/plugins/sky-forms-pro/skyforms/js/jquery.validate.min.js"></script>
	<script src="assets/plugins/sky-forms-pro/skyforms/js/jquery.maskedinput.min.js"></script>
	<script src="assets/plugins/sky-forms-pro/skyforms/js/jquery-ui.min.js"></script>
	<script src="assets/plugins/sky-forms-pro/skyforms/js/jquery.form.min.js"></script>
	<script type="text/javascript" src="assets/plugins/sky-forms-pro/skyforms/js/jquery.form.min.js"></script>
	<script type="text/javascript" src="assets/plugins/sky-forms-pro/skyforms/js/jquery.validate.min.js"></script>
	<!-- JS Customization -->
	<script type="text/javascript" src="assets/js/custom.js"></script>
	<!-- JS Page Level -->
	<script type="text/javascript" src="assets/js/app.js"></script>
	<script type="text/javascript" src="assets/js/forms/order.js"></script>
	<script type="text/javascript" src="assets/js/forms/review.js"></script>
	<script type="text/javascript" src="assets/js/forms/checkout.js"></script>
	<script type="text/javascript" src="assets/js/forms/login.js"></script>
	<script type="text/javascript" src="assets/js/forms/contact.js"></script>
	<script type="text/javascript" src="assets/js/plugins/style-switcher.js"></script>
	<script type="text/javascript">
	
		/*function upload(callback){
			return function(event){
				alert($(this)[0]);
			event.preventDefault();
			$.ajax({
				contentType: false,
				processData: false,
		        data: new FormData($(this)[0]),
		        type: $(this).attr('method'),
		        url: '/image/upload',
		        success: function(response) {
		        	if(response.error) alert(response.error);
		        	else{
		        		callback(response);
		        	}
		        }
				});
		}};*/
		
		function ready(){
			
			App.init();
			OrderForm.initOrderForm();
			ReviewForm.initReviewForm();
			CheckoutForm.initCheckoutForm();
			LoginForm.initLoginForm();
			ContactForm.initContactForm();
			StyleSwitcher.initStyleSwitcher();
			
			var new_timeline_subject = $('#subject').val();
			var new_timeline_writer = $('#writer').val();
			var new_timeline_date = $('#start').val();
			var new_timeline_content = $('#text').val();
			var new_timeline_picture = $('#picture').val();
			
			 $("#sky-form1").submit(function(x){
				   var report={projectId:project_id,type:"general"};
				   report.title=$('#subject').val();
				   report.writeDate=$('#start').val();
				   report.contents=$('#text').val();
				   //report.writer=$('#writer').val();
				   // alert(JSON.stringify(x));
				   //alert(JSON.stringify(report));
				   $.post('http://'+document.location.host+'/post/update/'+post_id,report,function(res){
						// 여기서 처리 결과를 가지고 오류 처리 등을 합니다. 자세한 내용은 testread.html을 참고합니다.
						//alert(JSON.stringify(res.result));
						alert("업로드 성공");
						location.href='jisu_timeline_angular.html?id='+project_id;
					});
			 });
		};
	</script>
	<!--[if lt IE 9]>
    <script src="assets/plugins/respond.js"></script>
    <script src="assets/plugins/html5shiv.js"></script>
    <script src="assets/plugins/placeholder-IE-fixes.js"></script>
  <![endif]-->
</body>
</html>
